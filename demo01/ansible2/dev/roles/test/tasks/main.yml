---
- name: debug for test_main
  debug: {msg: task - test_main }
- debug: {var: action}
- debug: {var: test_main_var}
#- debug: {var: test_main_var_as_action_create}
#- debug: {var: test_main_var_as_action_read}
#- debug: {var: test_main_var_as_action_update}
#- debug: {var: test_main_var_as_action_delete}
#- debug: {var: test_main_var_as_action_test_create}
#- debug: {var: test_main_var_as_action_test_read}
#- debug: {var: test_main_var_as_action_test_update}
#- debug: {var: test_main_var_as_action_test_delete}

- name: calling task - test_create.yml
  import_tasks: test_create.yml
  vars:
    test_create_var: "{{ test_main_var_as_action_create if test_main_var_as_action_create is defined else '_undefined_' }}"
  when: action == "create"

- name: calling task - test_read.yml
  import_tasks: test_read.yml
  vars:
    test_read_var: "{{ test_main_var_as_action_read if test_main_var_as_action_read is defined else '_undefined_' }}"
  when: action == "read"

- name: calling task - test_update.yml
  import_tasks: test_update.yml
  vars:
    test_update_var: "{{ test_main_var_as_action_update if test_main_var_as_action_update is defined else '_undefined_' }}"
  when: action == "update"

- name: calling task - test_delete.yml
  import_tasks: test_delete.yml
  vars:
    test_delete_var: "{{ test_main_var_as_action_delete if test_main_var_as_action_delete is defined else '_undefined_' }}"
  when: action == "delete"

- name: calling directly task - test_create.yml under role - test
  import_role:
    name: test
    tasks_from: test_create
  #vars:
  #  test_create_var: "{{ test_main_var_as_action_test_create if test_main_var_as_action_test_create is defined else '_undefined_' }}"
  when: action == "test_create"

- name: calling directly task - test_read.yml under role - test
  import_role:
    name: test
    tasks_from: test_read
  #vars:
  #  test_read_var: "{{ test_main_var_as_action_test_read if test_main_var_as_action_test_read is defined else '_undefined_' }}"
  when: action == "test_read"

- name: calling directly task - test_update.yml under role - test
  import_role:
    name: test
    tasks_from: test_update
  #vars:
  #  test_update_var: "{{ test_main_var_as_action_test_update if test_main_var_as_action_test_update is defined else '_undefined_' }}"
  when: action == "test_update"

- name: calling directly task - test_delete.yml under role - test
  import_role:
    name: test
    tasks_from: test_delete
  #vars:
  #  test_delete_var: "{{ test_main_var_as_action_test_delete if test_main_var_as_action_test_delete is defined else '_undefined_' }}"
  when: action == "test_delete"

# references:
# https://docs.ansible.com/ansible/latest/modules/import_role_module.html

